<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC 5000åˆ†æŒ‘æˆ° - Mibi èªæ€</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #1e2a47; --gold: #d4af37; --green: #28a745; --bg: #f4f7f9; }
        body { font-family: 'PingFang TC', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 30px; box-shadow: 0 15px 50px rgba(0,0,0,0.15); max-width: 750px; width: 95%; text-align: center; border-top: 10px solid var(--primary); }
        .nav-buttons { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .nav-btn { background: #eee; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 0.85rem; color: #555; transition: 0.3s; }
        .nav-btn:hover { background: var(--primary); color: white; }
        .stats { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 10px; }
        .progress-box { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin-bottom: 15px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), #4facfe); transition: 0.4s; }
        .stage-tag { display: inline-block; padding: 4px 15px; background: var(--primary); color: white; border-radius: 20px; font-size: 0.9rem; margin-bottom: 10px; }
        .mibi-box { width: 160px; height: 160px; margin: 0 auto 15px auto; border-radius: 50%; border: 3px solid #eee; background: #fff; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .mibi-img { width: 95%; height: 95%; object-fit: contain; transition: 0.3s; }
        .jump { transform: scale(1.1) translateY(-10px); }
        .game-card { background: #fafafa; border-radius: 20px; padding: 25px; min-height: 200px; border: 2px solid #f0f0f0; display: flex; flex-direction: column; justify-content: center; }
        .sentence { font-size: 1.4rem; line-height: 1.6; color: #333; text-align: left; }
        .blank { color: var(--gold); border-bottom: 3px dashed var(--gold); font-weight: bold; padding: 0 5px; }
        .win-word { color: var(--green); border-bottom: 3px solid var(--green); font-weight: bold; }
        .options { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 20px; }
        .btn { background: white; border: 2px solid var(--primary); padding: 10px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 var(--primary); }
        .btn:active { transform: translateY(2px); box-shadow: 0 0px 0 var(--primary); }
        .next-btn { background: var(--green); color: white; border: none; padding: 15px 50px; border-radius: 50px; font-size: 1.2rem; font-weight: bold; cursor: pointer; display: none; margin: 20px auto; }
        #msg { height: 30px; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <div class="nav-buttons">
        <button class="nav-btn" onclick="jumpTo(0)">ğŸ  éšæ®µ 1ï¼šå­—å°¾æŒ‘æˆ°</button>
        <button class="nav-btn" onclick="jumpTo(25)">ğŸš€ éšæ®µ 2ï¼šçµ„è£å¤§å¸«</button>
    </div>
    <div class="stats"><span id="timer">â±ï¸ 00:00</span><span id="score">ğŸ† 0</span></div>
    <div class="progress-box"><div class="progress-fill" id="pb"></div></div>
    <div id="stage-tag" class="stage-tag">éšæ®µä¸€ï¼šå­—å°¾è®Šå½¢æŒ‘æˆ°</div>
    <div class="mibi-box"><img id="mibi-pic" class="mibi-img" src="mib_work.png"></div>
    <div id="game" class="game-card"></div>
    <div id="msg"></div>
    <button id="next" class="next-btn" onclick="next()">ä¸‹ä¸€é¡Œ NEXT â†’</button>
</div>

<script>
    const data = [
        // 1-25 é¡Œ 
        { b: "SUCCEED", t: "The plan was a huge ____.", o: ["SUCCESS", "[-FUL]", "[-LY]"], a: "SUCCESS", c: "SUCCESS" },
        { b: "RELY", t: "We need a ____ partner.", o: ["RELIABLE", "RELYANCE", "RELYLY"], a: "RELIABLE", c: "RELIABLE" },
        { b: "PROFESSION", t: "Act in a ____ manner.", o: ["PROFESSIONAL", "PROFESSIONISM", "PROFESSIONLY"], a: "PROFESSIONAL", c: "PROFESSIONAL" },
        { b: "CONFIRM", t: "Wait for ____ of the deal.", o: ["CONFIRMATION", "CONFIRMING", "CONFIRMED"], a: "CONFIRMATION", c: "CONFIRMATION" },
        { b: "EXPAND", t: "Global ____ is our goal.", o: ["EXPANSION", "EXPANSIVE", "EXPANDABLE"], a: "EXPANSION", c: "EXPANSION" },
        { b: "ASSIST", t: "Do you need any ____?", o: ["ASSISTANCE", "ASSISTANT", "ASSISTED"], a: "ASSISTANCE", c: "ASSISTANCE" },
        { b: "INNOVATE", t: "He has ____ ideas.", o: ["INNOVATIVE", "INNOVATION", "INNOVATOR"], a: "INNOVATIVE", c: "INNOVATIVE" },
        { b: "DEPEND", t: "It is ____ on your effort.", o: ["DEPENDENT", "DEPENDENCE", "DEPENDLY"], a: "DEPENDENT", c: "DEPENDENT" },
        { b: "PRODUCE", t: "Boost our ____.", o: ["PRODUCTIVITY", "PRODUCTION", "PRODUCER"], a: "PRODUCTIVITY", c: "PRODUCTIVITY" },
        { b: "COMPETE", t: "A ____ market.", o: ["COMPETITIVE", "COMPETITION", "COMPETITOR"], a: "COMPETITIVE", c: "COMPETITIVE" },
        { b: "RESPONSE", t: "Who is ____ for this?", o: ["RESPONSIBLE", "RESPONSIBILITY", "RESPONSIVE"], a: "RESPONSIBLE", c: "RESPONSIBLE" },
        { b: "NEGOTIATE", t: "The ____ was successful.", o: ["NEGOTIATION", "NEGOTIATOR", "NEGOTIABLE"], a: "NEGOTIATION", c: "NEGOTIATION" },
        { b: "FLEXIBLE", t: "We value ____ here.", o: ["FLEXIBILITY", "FLEXIBLY", "FLEXIBLE"], a: "FLEXIBILITY", c: "FLEXIBILITY" },
        { b: "CRITIC", t: "A ____ stage of the project.", o: ["CRITICAL", "CRITICISM", "CRITICIZE"], a: "CRITICAL", c: "CRITICAL" },
        { b: "ANALYZE", t: "We need an ____.", o: ["ANALYSIS", "ANALYTIC", "ANALYST"], a: "ANALYSIS", c: "ANALYSIS" },
        { b: "REPRESENT", t: "Contact our ____.", o: ["REPRESENTATIVE", "REPRESENTATION", "REPRESENTED"], a: "REPRESENTATIVE", c: "REPRESENTATIVE" },
        { b: "SECURE", t: "Improve our ____.", o: ["SECURITY", "SECURELY", "SECURED"], a: "SECURITY", c: "SECURITY" },
        { b: "RETIRE", t: "Happy ____!", o: ["RETIREMENT", "RETIREING", "RETIREE"], a: "RETIREMENT", c: "RETIREMENT" },
        { b: "ACCURATE", t: "Check the ____.", o: ["ACCURACY", "ACCURATELY", "ACCURATE"], a: "ACCURACY", c: "ACCURACY" },
        { b: "APPROVE", t: "Waiting for ____.", o: ["APPROVAL", "APPROVING", "APPROVED"], a: "APPROVAL", c: "APPROVAL" },
        { b: "ATTEND", t: "High ____ today.", o: ["ATTENDANCE", "ATTENDANT", "ATTENSIVE"], a: "ATTENDANCE", c: "ATTENDANCE" },
        { b: "DELIVER", t: "The ____ is on time.", o: ["DELIVERY", "DELIVERANCE", "DELIVERED"], a: "DELIVERY", c: "DELIVERY" },
        { b: "EFFICIENT", t: "Work more ____.", o: ["EFFICIENTLY", "EFFICIENCY", "EFFICIENT"], a: "EFFICIENTLY", c: "EFFICIENTLY" },
        { b: "ORGANIZE", t: "A great ____.", o: ["ORGANIZER", "ORGANIZATION", "ORGANIZED"], a: "ORGANIZER", c: "ORGANIZER" },
        { b: "INFORM", t: "This is very ____.", o: ["INFORMATIVE", "INFORMATION", "INFORMED"], a: "INFORMATIVE", c: "INFORMATIVE" },

        // 26-50 é¡Œ (å·²ä¿®æ­£ PREVIEW é¡Œ)
        { g: "é ç«¯æœƒè­°", target: "TELECONFERENCE", t: "Join the ____.", p: ["TELE-", "VIDEO-", "CO-"], r: ["CONFERENCE", "VISION", "PHONE"], aA: "TELE-", aB: "CONFERENCE" },
        { g: "è·¨åœ‹å…¬å¸", target: "MULTINATIONAL", t: "A ____ company.", p: ["MULTI-", "INTER-", "TRANS-"], r: ["NATIONAL", "CULTURAL", "ACTIVE"], aA: "MULTI-", aB: "NATIONAL" },
        { g: "é ä»˜æ¬¾é …", target: "PREPAYMENT", t: "A ____ is required.", p: ["PRE-", "POST-", "RE-"], r: ["PAYMENT", "ORDER", "FIX"], aA: "PRE-", aB: "PAYMENT" },
        { g: "é‡æ–°å•Ÿå‹•", target: "REACTIVATE", t: "____ your account.", p: ["RE-", "DE-", "OVER-"], r: ["ACTIVATE", "STORE", "PLAY"], aA: "RE-", aB: "ACTIVATE" },
        { g: "å­å…¬å¸", target: "SUBDIVISION", t: "Our Asian ____.", p: ["SUB-", "SUPER-", "TRANS-"], r: ["DIVISION", "SECTION", "PART"], aA: "SUB-", aB: "DIVISION" },
        { g: "å…±åŒå‰µè¾¦äºº", target: "COFOUNDER", t: "She is the ____.", p: ["CO-", "SUB-", "EX-"], r: ["FOUNDER", "WORKER", "AUTHOR"], aA: "CO-", aB: "FOUNDER" },
        { g: "ç”Ÿæ…‹å‹å–„", target: "ECOFRIENDLY", t: "We use ____ bags.", p: ["ECO-", "BIO-", "RE-"], r: ["FRIENDLY", "LOGICAL", "ACTIVE"], aA: "ECO-", aB: "FRIENDLY" },
        { g: "ä¸»ç®¡è€…", target: "SUPERVISOR", t: "Ask your ____.", p: ["SUPER-", "SUB-", "HYPER-"], r: ["VISOR", "VISION", "INTEND"], aA: "SUPER-", aB: "VISOR" },
        { g: "é‹è¼¸ä¸­", target: "TRANSIT", t: "Goods in ____.", p: ["TRANS-", "INTER-", "SUB-"], r: ["IT", "PORT", "FER"], aA: "TRANS-", aB: "IT" },
        { g: "äº’å‹•å¼", target: "INTERACTIVE", t: "An ____ app.", p: ["INTER-", "RE-", "PRE-"], r: ["ACTIVE", "ACTION", "CHANGE"], aA: "INTER-", aB: "ACTIVE" },
        { g: "å¾®è™•ç†å™¨", target: "MICROPROCESSOR", t: "A new ____.", p: ["MICRO-", "MACRO-", "TELE-"], r: ["PROCESSOR", "SYSTEM", "PHONE"], aA: "MICRO-", aB: "PROCESSOR" },
        { g: "éåº¦å·¥ä½œ", target: "OVERWORKED", t: "Staff are ____.", p: ["OVER-", "UNDER-", "RE-"], r: ["WORKED", "PAID", "LOADED"], aA: "OVER-", aB: "WORKED" },
        { g: "è‡ªå‹•åŒ–", target: "AUTOMATION", t: "Focus on ____.", p: ["AUTO-", "SELF-", "RE-"], r: ["MATION", "MOBILE", "MATIC"], aA: "AUTO-", aB: "MATION" },
        { g: "åŠå¹´åº¦çš„", target: "SEMIANNUAL", t: "The ____ report.", p: ["SEMI-", "BI-", "MULTI-"], r: ["ANNUAL", "WEEKLY", "MONTHLY"], aA: "SEMI-", aB: "ANNUAL" },
        { g: "å»¶æœŸ", target: "POSTPONE", t: "____ the game.", p: ["POST-", "PRE-", "RE-"], r: ["PONE", "DATE", "LAY"], aA: "POST-", aB: "PONE" },
        { g: "ç•°å¸¸çš„", target: "ABNORMAL", t: "This is ____.", p: ["AB-", "UN-", "DE-"], r: ["NORMAL", "SURE", "ACTIVE"], aA: "AB-", aB: "NORMAL" },
        { g: "ç”Ÿç‰©ç§‘æŠ€", target: "BIOTECHNOLOGY", t: "A ____ firm.", p: ["BIO-", "ECO-", "NEO-"], r: ["TECHNOLOGY", "LOGY", "SPHERE"], aA: "BIO-", aB: "TECHNOLOGY" },
        { g: "ä½ä¼°", target: "UNDERESTIMATE", t: "Don't ____ him.", p: ["UNDER-", "OVER-", "RE-"], r: ["ESTIMATE", "VALUE", "RATE"], aA: "UNDER-", aB: "ESTIMATE" },
        { g: "å¤šåŠŸèƒ½", target: "MULTIFUNCTION", t: "A ____ tool.", p: ["MULTI-", "UNI-", "BI-"], r: ["FUNCTION", "PURPOSE", "USE"], aA: "MULTI-", aB: "FUNCTION" },
        { g: "é‡æ–°è£æ½¢", target: "RENOVATE", t: "____ the lab.", p: ["RE-", "DE-", "PRE-"], r: ["NOVATE", "BUILD", "PLACE"], aA: "RE-", aB: "NOVATE" },
        { g: "å‡ºå£", target: "EXPORT", t: "We ____ cars.", p: ["EX-", "IM-", "TRANS-"], r: ["PORT", "PORT", "PORT"], aA: "EX-", aB: "PORT" },
        { g: "å…§éƒ¨ç¶²è·¯", target: "INTRANET", t: "Use the ____.", p: ["INTRA-", "INTER-", "EXTRA-"], r: ["NET", "LINK", "FACE"], aA: "INTRA-", aB: "NET" },
        { g: "é›™èªçš„", target: "BILINGUAL", t: "She is ____.", p: ["BI-", "MONO-", "MULTI-"], r: ["LINGUAL", "CULTURAL", "LATERAL"], aA: "BI-", aB: "LINGUAL" },
        { g: "é è¦½", target: "PREVIEW", t: "Watch the ____.", p: ["PRE-", "RE-", "POST-"], r: ["VIEW", "DICT", "SENT"], aA: "PRE-", aB: "VIEW" },
        { g: "æ’¤å›", target: "WITHDRAW", t: "____ the bid.", p: ["WITH-", "OUT-", "UP-"], r: ["DRAW", "HOLD", "STAND"], aA: "WITH-", aB: "DRAW" }
    ];

    let idx = 0, score = 0, sec = 0, sA = "", sB = "", timer;
    let hasFailedThisTurn = false;

    function realShuffle(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex != 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    function jumpTo(targetIdx) {
        idx = targetIdx; score = 0; sec = 0; render();
    }

    function runTimer() { timer = setInterval(() => { sec++; let m = Math.floor(sec/60).toString().padStart(2,'0'), s = (sec%60).toString().padStart(2,'0'); document.getElementById('timer').innerText = `â±ï¸ ${m}:${s}`; }, 1000); }

    function render() {
        hasFailedThisTurn = false;
        const q = data[idx], g = document.getElementById('game'), pic = document.getElementById('mibi-pic');
        document.getElementById('pb').style.width = (idx/50*100)+"%";
        document.getElementById('score').innerText = `ğŸ† ${score}`;
        document.getElementById('msg').innerText = ""; document.getElementById('next').style.display = "none";
        pic.src = "mib_work.png"; pic.classList.remove('jump');

        if (idx < 25) {
            document.getElementById('stage-tag').innerText = "éšæ®µä¸€ï¼šå­—å°¾è®Šå½¢æŒ‘æˆ°";
            g.innerHTML = `<div class="sentence">${q.t.replace("____", `<span class="blank">${q.b}</span>`)}</div><div class="options" id="os"></div>`;
            realShuffle([...q.o]).forEach(o => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=o; 
                b.onclick=()=>{ if(o===q.a) win(q.c); else fail(); }; 
                document.getElementById('os').appendChild(b); 
            });
        } else {
            sA = ""; sB = ""; document.getElementById('stage-tag').innerText = "éšæ®µäºŒï¼šè¶…ç´šçµ„è£å¤§å¸«";
            g.innerHTML = `<div style="color:#888;margin-bottom:10px">æŒ‘æˆ°ï¼š${q.g}</div><div class="sentence">${q.t.replace("____", `<span id="pA" class="blank">?</span><span id="pB" class="blank">?</span>`)}</div><div class="options" id="oA"></div><div class="options" id="oB"></div>`;
            realShuffle([...q.p]).forEach(p => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=p; 
                b.onclick=()=>{ sA=p; document.getElementById('pA').innerText=p.replace("-",""); check(q); }; 
                document.getElementById('oA').appendChild(b); 
            });
            realShuffle([...q.r]).forEach(r => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=r; 
                b.onclick=()=>{ sB=r; document.getElementById('pB').innerText=r; check(q); }; 
                document.getElementById('oB').appendChild(b); 
            });
        }
    }

    function check(q) { if(sA && sB) { if(sA===q.aA && sB===q.aB) win(q.target); else fail(); } }
    function fail() { hasFailedThisTurn = true; document.getElementById('msg').innerHTML = "<span style='color:red'>å“å‘€ï¼ŒéŒ¯å›‰ï¼é€™é¡Œä¸èƒ½æ‹¿åˆ†äº†ï¼Œå†è©¦è©¦ï¼</span>"; }
    function win(word) {
        if (!hasFailedThisTurn) { score += 100; }
        const pic = document.getElementById('mibi-pic'); pic.src = "mibi_happy.png"; pic.classList.add('jump');
        document.getElementById('game').innerHTML = `<div class="sentence">${data[idx].t.replace("____", `<span class="win-word">${word}</span>`)}</div>`;
        document.getElementById('msg').innerHTML = hasFailedThisTurn ? 
            "<span style='color:gray'>ç­”å°äº†ï¼Œä½†å‰›æ‰ç­”éŒ¯ï¼Œé€™é¡Œä¸äºˆè¨ˆåˆ†ã€‚</span>" : 
            "<span style='color:var(--green)'>âœ¨ é¦–è©¦æˆåŠŸï¼ğŸ† +100 åˆ†ï¼</span>";
        document.getElementById('next').style.display = "block";
        if(!hasFailedThisTurn) confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
    }
    function next() { idx++; if (idx < 50) render(); else { clearInterval(timer); document.getElementById('game').innerHTML = `<h2>ğŸ† 5000åˆ†å¤§æŒ‘æˆ°é”æˆï¼</h2><p>æœ€çµ‚å¾—åˆ†ï¼š${score}</p><p>è²»æ™‚ï¼š${document.getElementById('timer').innerText}</p>`; document.getElementById('next').style.display = "none"; } }
    
    runTimer(); render();
</script>
</body>
</html>