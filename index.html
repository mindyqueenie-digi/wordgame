<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC 5000åˆ†æŒ‘æˆ° - Mibi èªæ€</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #1e2a47; --gold: #d4af37; --green: #28a745; --bg: #f4f7f9; }
        body { font-family: 'PingFang TC', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 30px; box-shadow: 0 15px 50px rgba(0,0,0,0.15); max-width: 750px; width: 95%; text-align: center; border-top: 10px solid var(--primary); }
        .stats { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 10px; }
        .progress-box { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin-bottom: 15px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), #4facfe); transition: 0.4s; }
        .stage-tag { display: inline-block; padding: 4px 15px; background: var(--primary); color: white; border-radius: 20px; font-size: 0.9rem; margin-bottom: 10px; }
        .mibi-box { width: 160px; height: 160px; margin: 0 auto 15px auto; border-radius: 50%; border: 3px solid #eee; background: #fff; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .mibi-img { width: 95%; height: 95%; object-fit: contain; transition: 0.3s; }
        .jump { transform: scale(1.1) translateY(-10px); }
        .game-card { background: #fafafa; border-radius: 20px; padding: 25px; min-height: 200px; border: 2px solid #f0f0f0; display: flex; flex-direction: column; justify-content: center; }
        .sentence { font-size: 1.4rem; line-height: 1.6; color: #333; text-align: left; }
        .blank { color: var(--gold); border-bottom: 3px dashed var(--gold); font-weight: bold; padding: 0 5px; }
        .win-word { color: var(--green); border-bottom: 3px solid var(--green); font-weight: bold; }
        .options { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 20px; }
        .btn { background: white; border: 2px solid var(--primary); padding: 10px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 var(--primary); }
        .btn:active { transform: translateY(2px); box-shadow: 0 0px 0 var(--primary); }
        .next-btn { background: var(--green); color: white; border: none; padding: 15px 50px; border-radius: 50px; font-size: 1.2rem; font-weight: bold; cursor: pointer; display: none; margin: 20px auto; }
        #msg { height: 30px; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <div class="stats"><span id="timer">â±ï¸ 00:00</span><span id="score">ğŸ† 0</span></div>
    <div class="progress-box"><div class="progress-fill" id="pb"></div></div>
    <div id="stage-tag" class="stage-tag">éšæ®µä¸€ï¼šå­—å°¾è®Šå½¢æŒ‘æˆ°</div>
    <div class="mibi-box"><img id="mibi-pic" class="mibi-img" src="mib_work.png"></div>
    <div id="game" class="game-card"></div>
    <div id="msg"></div>
    <button id="next" class="next-btn" onclick="next()">ä¸‹ä¸€é¡Œ NEXT â†’</button>
</div>

<script>
    const data = [
        // 1-25 é¡Œ (å­—å°¾è®Šå½¢)
        { b: "SUCCEED", t: "The plan was a huge ____.", o: ["SUCCESS", "[-FUL]", "[-LY]"], a: "SUCCESS", c: "SUCCESS" },
        { b: "RELY", t: "We need a ____ partner.", o: ["[-ABLE]", "[-ANCE]", "[-LY]"], a: "[-ABLE]", c: "RELIABLE" },
        { b: "PROFESSION", t: "Act in a ____ manner.", o: ["[-AL]", "[-ISM]", "[-LY]"], a: "[-AL]", c: "PROFESSIONAL" },
        { b: "CONFIRM", t: "Wait for ____ of the deal.", o: ["[-ATION]", "[-ING]", "[-ED]"], a: "[-ATION]", c: "CONFIRMATION" },
        { b: "EXPAND", t: "Global ____ is our goal.", o: ["[-ION]", "[-IVE]", "[-ABLE]"], a: "[-ION]", c: "EXPANSION" },
        { b: "ASSIST", t: "Do you need any ____?", o: ["[-ANCE]", "[-ANT]", "[-ED]"], a: "[-ANCE]", c: "ASSISTANCE" },
        { b: "INNOVATE", t: "He has ____ ideas.", o: ["[-IVE]", "[-ION]", "[-OR]"], a: "[-IVE]", c: "INNOVATIVE" },
        { b: "DEPEND", t: "It is ____ on your effort.", o: ["[-ENT]", "[-ENCE]", "[-LY]"], a: "[-ENT]", c: "DEPENDENT" },
        { b: "PRODUCE", t: "Boost our ____.", o: ["[-IVITY]", "[-TION]", "[-ER]"], a: "[-IVITY]", c: "PRODUCTIVITY" },
        { b: "COMPETE", t: "A ____ market.", o: ["[-ITIVE]", "[-TION]", "[-OR]"], a: "[-ITIVE]", c: "COMPETITIVE" },
        { b: "RESPONSE", t: "Who is ____ for this?", o: ["[-IBLE]", "[-IBILITY]", "[-IVE]"], a: "[-IBLE]", c: "RESPONSIBLE" },
        { b: "NEGOTIATE", t: "The ____ was successful.", o: ["[-ATION]", "[-OR]", "[-ABLE]"], a: "[-ATION]", c: "NEGOTIATION" },
        { b: "FLEXIBLE", t: "We value ____ here.", o: ["[-ITY]", "[-LY]", "FLEXIBLE"], a: "[-ITY]", c: "FLEXIBILITY" },
        { b: "CRITIC", t: "A ____ stage of the project.", o: ["[-AL]", "[-ISM]", "[-IZE]"], a: "[-AL]", c: "CRITICAL" },
        { b: "ANALYZE", t: "We need an ____.", o: ["ANALYSIS", "[-LYTIC]", "[-IST]"], a: "ANALYSIS", c: "ANALYSIS" },
        { b: "REPRESENT", t: "Contact our ____.", o: ["[-ATIVE]", "[-ATION]", "[-ED]"], a: "[-ATIVE]", c: "REPRESENTATIVE" },
        { b: "SECURE", t: "Improve our ____.", o: ["[-ITY]", "[-LY]", "[-ED]"], a: "[-ITY]", c: "SECURITY" },
        { b: "RETIRE", t: "Happy ____!", o: ["[-MENT]", "[-ING]", "[-EE]"], a: "[-MENT]", c: "RETIREMENT" },
        { b: "ACCURATE", t: "Check the ____.", o: ["[-ACY]", "[-LY]", "[-ATE]"], a: "[-ACY]", c: "ACCURACY" },
        { b: "APPROVE", t: "Waiting for ____.", o: ["[-AL]", "[-ING]", "[-ED]"], a: "[-AL]", c: "APPROVAL" },
        { b: "ATTEND", t: "High ____ today.", o: ["[-ANCE]", "[-ANT]", "[-IVE]"], a: "[-ANCE]", c: "ATTENDANCE" },
        { b: "DELIVER", t: "The ____ is on time.", o: ["[-Y]", "[-ANCE]", "[-ED]"], a: "[-Y]", c: "DELIVERY" },
        { b: "EFFICIENT", t: "Work more ____.", o: ["[-LY]", "[-CY]", "[-ENT]"], a: "[-LY]", c: "EFFICIENTLY" },
        { b: "ORGANIZE", t: "A great ____.", o: ["[-ER]", "[-ATION]", "[-ED]"], a: "[-ER]", c: "ORGANIZER" },
        { b: "INFORM", t: "This is very ____.", o: ["[-ATIVE]", "[-ATION]", "[-ED]"], a: "[-ATIVE]", c: "INFORMATIVE" },

        // 26-50 é¡Œ (å‰ç¶´çµ„è£)
        { g: "é ç«¯æœƒè­°", target: "TELECONFERENCE", t: "Join the ____.", p: ["TELE-", "VIDEO-", "CO-"], r: ["CONFERENCE", "VISION", "PHONE"], aA: "TELE-", aB: "CONFERENCE" },
        { g: "è·¨åœ‹å…¬å¸", target: "MULTINATIONAL", t: "A ____ company.", p: ["MULTI-", "INTER-", "TRANS-"], r: ["NATIONAL", "CULTURAL", "ACTIVE"], aA: "MULTI-", aB: "NATIONAL" },
        { g: "é ä»˜æ¬¾é …", target: "PREPAYMENT", t: "A ____ is required.", p: ["PRE-", "POST-", "RE-"], r: ["PAYMENT", "ORDER", "FIX"], aA: "PRE-", aB: "PAYMENT" },
        { g: "é‡æ–°å•Ÿå‹•", target: "REACTIVATE", t: "____ your account.", p: ["RE-", "DE-", "OVER-"], r: ["ACTIVATE", "STORE", "PLAY"], aA: "RE-", aB: "ACTIVATE" },
        { g: "å­å…¬å¸", target: "SUBDIVISION", t: "Our Asian ____.", p: ["SUB-", "SUPER-", "TRANS-"], r: ["DIVISION", "SECTION", "PART"], aA: "SUB-", aB: "DIVISION" },
        { g: "å…±åŒå‰µè¾¦äºº", target: "COFOUNDER", t: "She is the ____.", p: ["CO-", "SUB-", "EX-"], r: ["FOUNDER", "WORKER", "AUTHOR"], aA: "CO-", aB: "FOUNDER" },
        { g: "ç”Ÿæ…‹å‹å–„", target: "ECOFRIENDLY", t: "We use ____ bags.", p: ["ECO-", "BIO-", "RE-"], r: ["FRIENDLY", "LOGICAL", "ACTIVE"], aA: "ECO-", aB: "FRIENDLY" },
        { g: "ä¸»ç®¡è€…", target: "SUPERVISOR", t: "Ask your ____.", p: ["SUPER-", "SUB-", "HYPER-"], r: ["VISOR", "VISION", "INTEND"], aA: "SUPER-", aB: "VISOR" },
        { g: "é‹è¼¸ä¸­", target: "TRANSIT", t: "Goods in ____.", p: ["TRANS-", "INTER-", "SUB-"], r: ["IT", "PORT", "FER"], aA: "TRANS-", aB: "IT" },
        { g: "äº’å‹•å¼", target: "INTERACTIVE", t: "An ____ app.", p: ["INTER-", "RE-", "PRE-"], r: ["ACTIVE", "ACTION", "CHANGE"], aA: "INTER-", aB: "ACTIVE" },
        { g: "å¾®è™•ç†å™¨", target: "MICROPROCESSOR", t: "A new ____.", p: ["MICRO-", "MACRO-", "TELE-"], r: ["PROCESSOR", "SYSTEM", "PHONE"], aA: "MICRO-", aB: "PROCESSOR" },
        { g: "éåº¦å·¥ä½œ", target: "OVERWORKED", t: "Staff are ____.", p: ["OVER-", "UNDER-", "RE-"], r: ["WORKED", "PAID", "LOADED"], aA: "OVER-", aB: "WORKED" },
        { g: "è‡ªå‹•åŒ–", target: "AUTOMATION", t: "Focus on ____.", p: ["AUTO-", "SELF-", "RE-"], r: ["MATION", "MOBILE", "MATIC"], aA: "AUTO-", aB: "MATION" },
        { g: "åŠå¹´åº¦çš„", target: "SEMIANNUAL", t: "The ____ report.", p: ["SEMI-", "BI-", "MULTI-"], r: ["ANNUAL", "WEEKLY", "MONTHLY"], aA: "SEMI-", aB: "ANNUAL" },
        { g: "å»¶æœŸ", target: "POSTPONE", t: "____ the game.", p: ["POST-", "PRE-", "RE-"], r: ["PONE", "DATE", "LAY"], aA: "POST-", aB: "PONE" },
        { g: "ç•°å¸¸çš„", target: "ABNORMAL", t: "This is ____.", p: ["AB-", "UN-", "DE-"], r: ["NORMAL", "SURE", "ACTIVE"], aA: "AB-", aB: "NORMAL" },
        { g: "ç”Ÿç‰©ç§‘æŠ€", target: "BIOTECHNOLOGY", t: "A ____ firm.", p: ["BIO-", "ECO-", "NEO-"], r: ["TECHNOLOGY", "LOGY", "SPHERE"], aA: "BIO-", aB: "TECHNOLOGY" },
        { g: "ä½ä¼°", target: "UNDERESTIMATE", t: "Don't ____ him.", p: ["UNDER-", "OVER-", "RE-"], r: ["ESTIMATE", "VALUE", "RATE"], aA: "UNDER-", aB: "ESTIMATE" },
        { g: "å¤šåŠŸèƒ½", target: "MULTIFUNCTION", t: "A ____ tool.", p: ["MULTI-", "UNI-", "BI-"], r: ["FUNCTION", "PURPOSE", "USE"], aA: "MULTI-", aB: "FUNCTION" },
        { g: "é‡æ–°è£æ½¢", target: "RENOVATE", t: "____ the lab.", p: ["RE-", "DE-", "PRE-"], r: ["NOVATE", "BUILD", "PLACE"], aA: "RE-", aB: "NOVATE" },
        { g: "å‡ºå£", target: "EXPORT", t: "We ____ cars.", p: ["EX-", "IM-", "TRANS-"], r: ["PORT", "PORT", "PORT"], aA: "EX-", aB: "PORT" },
        { g: "å…§éƒ¨ç¶²è·¯", target: "INTRANET", t: "Use the ____.", p: ["INTRA-", "INTER-", "EXTRA-"], r: ["NET", "LINK", "FACE"], aA: "INTRA-", aB: "NET" },
        { g: "é›™èªçš„", target: "BILINGUAL", t: "She is ____.", p: ["BI-", "MONO-", "MULTI-"], r: ["LINGUAL", "CULTURAL", "LATERAL"], aA: "BI-", aB: "LINGUAL" },
        { g: "é è¦½", target: "PREVIEW", t: "Watch the ____.", p: ["PRE-", "RE-", "POST-"], r: ["VIEW", "VIEW", "VIEW"], aA: "PRE-", aB: "VIEW" },
        { g: "æ’¤å›", target: "WITHDRAW", t: "____ the bid.", p: ["WITH-", "OUT-", "UP-"], r: ["DRAW", "HOLD", "STAND"], aA: "WITH-", aB: "DRAW" }
    ];

    let idx = 0, score = 0, sec = 0, sA = "", sB = "", timer;

    // æ´—ç‰Œå‡½æ•¸ï¼šç¢ºä¿é¸é …éš¨æ©Ÿ
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function runTimer() { timer = setInterval(() => { sec++; let m = Math.floor(sec/60).toString().padStart(2,'0'), s = (sec%60).toString().padStart(2,'0'); document.getElementById('timer').innerText = `â±ï¸ ${m}:${s}`; }, 1000); }

    function render() {
        const q = data[idx], g = document.getElementById('game'), pic = document.getElementById('mibi-pic');
        document.getElementById('pb').style.width = (idx/50*100)+"%";
        document.getElementById('score').innerText = `ğŸ† ${score}`;
        document.getElementById('msg').innerText = ""; document.getElementById('next').style.display = "none";
        pic.src = "mib_work.png"; pic.classList.remove('jump');

        if (idx < 25) {
            document.getElementById('stage-tag').innerText = "éšæ®µä¸€ï¼šå­—å°¾è®Šå½¢æŒ‘æˆ°";
            g.innerHTML = `<div class="sentence">${q.t.replace("____", `<span class="blank">${q.b}</span>`)}</div><div class="options" id="os"></div>`;
            
            // éš¨æ©Ÿæ’åˆ—é¸é …å¾Œå†ç”ŸæˆæŒ‰éˆ•
            shuffle([...q.o]).forEach(o => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=o; 
                b.onclick=()=>{ if(o===q.a) win(q.c); else fail(); }; 
                document.getElementById('os').appendChild(b); 
            });
        } else {
            sA = ""; sB = ""; document.getElementById('stage-tag').innerText = "éšæ®µäºŒï¼šè¶…ç´šçµ„è£å¤§å¸«";
            g.innerHTML = `<div style="color:#888;margin-bottom:10px">æŒ‘æˆ°ï¼š${q.g}</div><div class="sentence">${q.t.replace("____", `<span id="pA" class="blank">?</span><span id="pB" class="blank">?</span>`)}</div><div class="options" id="oA"></div><div class="options" id="oB"></div>`;
            
            // éš¨æ©Ÿæ’åˆ—å‰ç¶´
            shuffle([...q.p]).forEach(p => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=p; 
                b.onclick=()=>{ sA=p; document.getElementById('pA').innerText=p.replace("-",""); check(q); }; 
                document.getElementById('oA').appendChild(b); 
            });
            // éš¨æ©Ÿæ’åˆ—å­—æ ¹
            shuffle([...q.r]).forEach(r => { 
                const b = document.createElement('button'); b.className='btn'; b.innerText=r; 
                b.onclick=()=>{ sB=r; document.getElementById('pB').innerText=r; check(q); }; 
                document.getElementById('oB').appendChild(b); 
            });
        }
    }

    function check(q) { if(sA && sB) { if(sA===q.aA && sB===q.aB) win(q.target); else fail(); } }
    function fail() { document.getElementById('msg').innerHTML = "<span style='color:red'>å“å‘€ï¼Œå†æƒ³ä¸€ä¸‹ä¸‹ï¼</span>"; }
    function win(word) {
        score += 100; const pic = document.getElementById('mibi-pic'); pic.src = "mibi_happy.png"; pic.classList.add('jump');
        document.getElementById('game').innerHTML = `<div class="sentence">${data[idx].t.replace("____", `<span class="win-word">${word}</span>`)}</div>`;
        document.getElementById('msg').innerHTML = "<span style='color:var(--green)'>âœ¨ ç­”å°äº†ï¼Mibi ç‚ºä½ å–é‡‡ï¼</span>";
        document.getElementById('next').style.display = "block";
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
    }
    function next() { idx++; if (idx < 50) render(); else { clearInterval(timer); document.getElementById('game').innerHTML = `<h2>ğŸ† 5000åˆ†å¤§æŒ‘æˆ°é”æˆï¼</h2><p>è²»æ™‚ï¼š${document.getElementById('timer').innerText}</p>`; document.getElementById('next').style.display = "none"; } }
    
    runTimer(); render();
</script>
</body>
</html>